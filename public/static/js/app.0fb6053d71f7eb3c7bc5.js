webpackJsonp([4],{"3pjb":function(e,t){},EdYW:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("d7EF"),s=n.n(i),o=n("/5sW"),a=n("//Fk"),r=n.n(a),u=n("gRE1"),c=n.n(u),l=n("fZjL"),d=n.n(l),f=n("fPsR"),h=void 0,m=function(e){return e.modules.sort(f.a.sortByOrder),e.modules.unshift(null),e.inserters.sort(function(t,n){return f.a.sortByOrder(e.items[t.name],e.items[n.name])}),e.machines.sort(function(e,t){return"player"===e.name?-1:"player"===t.name?1:e.name>t.name?1:-1}),d()(e.groups).forEach(function(t){var n=e.groups[t];if(n.subgroups){n.subgroupsWithItems=[];var i=0;d()(n.subgroups).forEach(function(t){if(e.subgroups[t]){var s=[];d()(n.subgroups[t]).forEach(function(t){if(e.items[t]&&e.recipes[t]){var n=e.recipes[t];s.push(n),i++}s.sort(f.a.sortByOrder)});var o={order:n.subgroups[t],items:s,name:t};n.subgroupsWithItems.push(o)}}),0!==i?n.subgroupsWithItems.sort(f.a.sortByOrder):delete e.groups[t]}else delete e.groups[t]}),e.groups=c()(e.groups).sort(f.a.sortByOrder),e},p=function(e){return n.e(1).then(n.bind(null,"WgY6")).then(function(t){return fetch(e+".zip",{mode:"cors"}).then(function(e){return e.blob()}).then(t.loadAsync).then(function(t){return[e,t]})})},v=function(e){return p(e).then(function(e){return[e]}).then(b)},g=function(e,t){d()(t.translations).forEach(function(i){var s=t.translations[i];try{s.el=n("pbL6")("./"+i).default.el}catch(e){}e.$i18n.mergeLocaleMessage(i,s),e.$store.commit("saveTranslation",[i,s])})},b=function(e,t,i){return function(e,t){console.log("extracting...");var i=window.fs||{},o=window.files||{};return n.e(0).then(n.bind(null,"1PN3")).then(function(n){var a=void 0;(t=t||"")?(a=i,i[t]=i[t]||{},a=i[t],t+="/"):a=i;var u=n.emscripten,c=[];try{u.FS_createFolder("/","locale",!0,!0)}catch(u){}return e.forEach(function(e,n){var i=s()(e,2),r=i[0],l=i[1],d=a;console.log("extracting "+r),l.forEach(function(e,i){if(i.dir){var s=d;i.name.split("/").forEach(function(e){s[e]?s=s[e]:e&&(s[e]={})});var a=i.name.match(/(.*)\/(.+)/);a&&a[2]||(a={1:"",2:i.name})}else{var r=i.name.substring(i.name.length-4,i.name.length);".lua"===r||".cfg"===r||".ini"===r||"json"===r?c.push(i.async("text").then(function(e){o[t+i.name]=e;var s=d;i.name.split("/").forEach(function(e){e&&s[e]?s=s[e]:s[e]=!0});var a=i.name.match(/(.*)\/(.+)/);if(a||(a={1:"",2:i.name}),3===n&&!i.dir&&!t)try{return u.FS_createDataFile("/"+a[1],a[2],e,!0,!1)}catch(e){if("EEXIST"!==e.code)throw e}})):c.push(i.async("base64").then(function(e){o[t+i.name]=e}))}})}),r.a.all(c)}).then(function(){return[i,o]})}(e,t).then(function(e){var t=s()(e,2),o=t[0],a=t[1];return console.log("lua..."),function(e,t,i){return n.e(0).then(n.bind(null,"1PN3")).then(function(n){window.getFileContent=function(e){var t=window.files[e];return t},window.fs=e,window.files=t;var s=["core","base"];return i=i||[],s=s.concat(i),h||(h=new n.Lua.State).execute('\n        require("quantorio")\n        require("dataloader")\n      '),h.execute("\n      data.raw = {}\n      js.global.meta = browserParse({'"+s.join("','")+"'}, "+s.length+")\n    "),window.meta})}(o,a,i)}).then(m).then(function(e){return console.log("done"),window.meta=e,e}).catch(function(e){if(!e.lua_stack)throw e;console.error(e.lua_stack)})},w={init:function(e){return r.a.all([p("lualib"),p("core"),p("base"),p("quantorio"),p(e)]).then(b)},parse:b,setVue:function(e,t){window.items=t.items,e.$store.commit("setMeta",t),g(e,t)},loadSingle:v,loadTranslation:function(e,t){return e.$store.commit("setLoading",!0),v(t).then(function(t){g(e,t),e.$store.commit("setLoading",!1)})}},_=n("Gu7T"),y=n.n(_),x=n("bOdI"),E=n.n(x),k=n("STAw"),j=n.n(k),$=n("+X65"),M=n.n($),C=n("Ph1M"),R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"bottom",trigger:"click"},model:{value:e.visiable,callback:function(t){e.visiable=t},expression:"visiable"}},[n("span",e._l(e.allowedModules,function(t){return n("img",{staticClass:"icon icon-bordered button",attrs:{src:e.icon(t,"module")},on:{click:function(n){e.update(t)}}})})),e._v(" "),n("span",{attrs:{slot:"reference"},slot:"reference"},[n("img",{staticClass:"icon icon-bordered button",attrs:{src:e.icon(e.selectedModule,"module")}})])])},staticRenderFns:[]},T=n("VU/8")(C.a,R,!1,null,null,null).exports,S={props:["visible"],data:function(){return{uploaderHeight:"20vh",uploaderIconHeight:"12vh",options:{acceptedFileTypes:["application/zip"],url:"#",autoQueue:!1,createImageThumbnails:!1,dragClass:"dragging"}}},methods:{ichange:function(e){for(var t=this,n=e.target.files,i=function(e){var i=n[e];if(console.log(i),t.tableData.find(function(e){return e.name===i.name}))return"continue";t.tableData.push({file:i,name:i.name})},s=0;s<n.length;s++)i(s)},setFiles:function(e){this.$store.commit("setLoading",!0);var t=this;window.setTimeout(function(){n.e(1).then(n.bind(null,"WgY6")).then(function(n){var i=[];e.forEach(function(e){i.push(n.loadAsync(e.nativeFile).then(function(t){return[e.name,t]}))}),r.a.all(i).then(function(e){var t=[];return e.forEach(function(e){var n=s()(e,2),i=(n[0],n[1].folder(/^[^/]+\/$/)[0].name);t.push(i.substring(0,i.length-1))}),w.parse(e,"data",t)}).then(function(e){w.setVue(t,e),t.$emit("update:visible",!1)}).catch(function(e){console.error(e),alert("some module got an error")}).finally(function(){t.$store.commit("setLoading",!1)})})},1)},handleMove:function(e,t,n,i){e.target.blur();var s=0;if("prev"===i){if(0===n)return;s=-1}else s=1;t.splice(n+s,0,t.splice(n,1)[0])},handleRemove:function(e,t){t.splice(e,1),0===t.length&&(this.uploaderHeight="20vh",this.uploaderIconHeight="12vh")}},computed:{_visible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},aheight:function(){return console.log(123),this.$refs.uploader&&this.$refs.uploader.files.length?"10vh":"20vh"}}},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{"show-close":!1,visible:e._visible},on:{"update:visible":function(t){e._visible=t}}},[n("vue-transmit",e._b({ref:"uploader",staticClass:"col-12",attrs:{tag:"section","upload-area-classes":"bg-faded"},on:{"added-files":function(t){e.uploaderHeight="10vh",e.uploaderIconHeight="8vh"}},scopedSlots:e._u([{key:"files",fn:function(t){return[n("el-table",{attrs:{data:t.files}},[n("el-table-column",{attrs:{width:60},scopedSlots:e._u([{key:"default",fn:function(i){return["base"!==i.row.name?[n("el-button",{staticClass:"operation el-icon-minus el-icon",attrs:{type:"danger",size:"small"},on:{click:function(n){e.handleRemove(i.$index,t.files)}}})]:e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name"}}),e._v(" "),n("el-table-column",{attrs:{width:60},scopedSlots:e._u([{key:"default",fn:function(i){return["base"!==i.row.name?[n("el-button",{staticClass:"el-icon-caret-top el-icon",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){e.handleMove(n,t.files,i.$index,"prev")}}}),n("br"),e._v(" "),n("el-button",{staticClass:"el-icon-caret-bottom el-icon",attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(n){e.handleMove(n,t.files,i.$index,"next")}}})]:e._e()]}}])})],1),e._v(" "),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{staticClass:"el-icon-check",staticStyle:{width:"50%",margin:"10px 0 0 0","font-size":"32px",padding:"4px 0"},attrs:{type:"primary"},on:{click:function(n){e.setFiles(t.files)}}})],1)]}}])},"vue-transmit",e.options,!1),[n("div",{staticClass:"inner",style:{height:e.uploaderHeight}},[n("div",{staticClass:"el-icon-document",style:{"font-size":e.uploaderIconHeight}})])])],1)},staticRenderFns:[]};var L=n("VU/8")(S,q,!1,function(e){n("EdYW")},"data-v-3cbcbb3e",null).exports,z=n("woOf"),D=n.n(z),N=n("Zrlr"),V=n.n(N),U=n("wxAW"),F=n.n(U),H=void 0,P=void 0,A=void 0,I=void 0,O=void 0,W=1,X={},B={productivity:0,speed:0,consumption:0,pollution:0},Q={Row:function(){function e(t,n,i){var s=this;V()(this,e),H=window.meta.resources,P=window.meta.recipes,A=window.meta.machines,I=window.meta.categories,O=window.meta.beacons;var o=Boolean(H[t]);i||(i=0),this.id=W++,this.name=t,this.machine=null,this.recipe=o?H[t]:P[t],this.needs=0,this.modules=[],this.beacons=[],this.type=n,this._sub=null,this.canExpend=!0,this.expended=!1,this.isResource=o,this.indent=i,this.bonus=D()({},B),this.batchTime=.5,this.sources=[],this.isData=!0,this.recipe||(this.recipe=P.dummy),this.recipe.showName&&(this.showName=this.recipe.showName),this.icon=f.a.icon(this.showName||t),this.machine=A.find(function(e){return e.name===I[s.recipe.category][0]}),O.forEach(function(e){s.beacons.push({count:0,modules:[],beacon:e})}),X[t]&&X[t].forEach(function(e){s[e.k]=e.v})}return F()(e,[{key:"machineCount",value:function(){return this.needs/this.calcResultPerMachinePerMinute()}},{key:"inserterCount",value:function(e){return this.calcResultPerMachinePerMinute()/e.turns_per_minute}},{key:"calcResultPerMachinePerMinute",value:function(){var e=this.recipe,t=this.machine,n=void 0;return n=this.isResource?60/(e.mining_time/t.mining_speed/(t.mining_power-e.hardness)):60/(e.normal.energy_required/t.crafting_speed)*this.result_count,this.bonus.productivity&&(n*=1+this.bonus.productivity),this.bonus.speed&&(n*=1+this.bonus.speed),n}},{key:"update",value:function(){var t=this;if(null===this._sub&&(this._sub=[]),this.bonus=D()({},B),d()(this.bonus).forEach(function(e){t.modules.forEach(function(n){n&&n.effect[e]&&(t.bonus[e]+=n.effect[e].bonus)}),t.beacons.forEach(function(n){n.modules.forEach(function(i){i&&i.effect[e]&&(t.bonus[e]+=i.effect[e].bonus*n.count*n.beacon.distribution_effectivity)})})}),!this.isResource){var n=this.recipe.normal.ingredients;d()(n).forEach(function(i){var s=n[i],o=t._sub.find(function(e){return e.name===i});o||(o=new e(i,"sub",t.indent+1),t._sub.push(o)),o.needs=t.needs/t.result_count*s/(1+t.bonus.productivity),void 0===H[i]&&o.update()})}}},{key:"saveRecipeConfig",value:function(){X[this.name]=[{k:"machine",v:this.machine},{k:"beacons",v:this.beacons},{k:"modules",v:this.modules}]}},{key:"sub",get:function(){return null===this._sub&&this.update(),this._sub}},{key:"result_count",get:function(){return this.isResource?1:this.recipe.normal.results[d()(this.recipe.normal.results)[0]]||1}}]),e}(),difficulty:"normal"},Z={props:["visible"],methods:{translate:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.a.translate.apply(f.a,[this].concat(y()(t)))},doAdd:function(e){this.$emit("select",e),this.$emit("update:visible",!1)},icon:f.a.icon},computed:{_visible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},groups:function(){return this.$store.state.meta.groups},items:function(){return this.$store.state.meta.items}}},G={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-dialog",{attrs:{"show-close":!1,visible:e._visible},on:{"update:visible":function(t){e._visible=t}}},[e._m(0)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"border-card"}},e._l(e.groups,function(t){return n("el-tab-pane",{key:t.name},[n("span",{attrs:{slot:"label"},slot:"label"},[n("img",{staticClass:"group",attrs:{src:e.icon(t)}})]),e._v(" "),n("div",e._l(t.subgroupsWithItems,function(t){return n("div",e._l(t.items,function(t){return n("abbr",{attrs:{title:e.translate(t)}},[n("a",{on:{click:function(n){e.doAdd(t.name)}}},[n("img",{staticClass:"icon icon-bordered",attrs:{src:e.icon(t)}})])])}))}))])}))}]};var K={components:{ModuleSelector:T,RequirementSelector:n("VU/8")(Z,G,!1,function(e){n("3pjb")},"data-v-505c957e",null).exports,Mods:L,LuaLoader:j.a},name:"Index",data:function(){return{resetMachine:"player",locale:"en",selectTargetDialogVisiable:!1,ModsDialogVisiable:!1,requirements:[],remainders:[],remainderSources:{},window:window,zips:{},fs:{},hashLoaded:!1,loadedLanguages:{}}},methods:{tableRowClassName:function(e){var t=e.row;e.rowIndex;return"requirement"===t.type?"success-row":"remainder"===t.type?"warning-row":"split"===t.type&&this.requirements.length?"blue-row":void 0},handleAdd:function(){this.selectTargetDialogVisiable=!0},handleMod:function(){this.ModsDialogVisiable=!0},handleRemove:function(e,t){this.requirements.splice(e,1)},selectMachine:function(e,t){e.machine=t;var n=t.module_slots?t.module_slots:0;e.modules.splice(n)},doAdd:function(e){var t=new Q.Row(e,"requirement");t.needs=1,this.requirements.push(t),this.selectTargetDialogVisiable=!1},renderHeaderOperation:function(e,t){var n;t.column,t.$index;return e("el-button",(n={class:"operation",attrs:{type:"success",size:"mini"}},E()(n,"class","el-icon-plus el-icon"),E()(n,"on",{click:this.handleAdd}),n))},renderHeaderInserter:function(e,t){var n=this,i=(t.column,t.$index,this.inserters.map(function(t,i){return e("img",{class:"icon",attrs:{src:n.icon(t)}})}));return e("span",{class:"flex around"},[i])},renderHeaderMachine:function(e,t){var n=this,i=(t.column,t.$index,this.machines.map(function(t,i){return e("el-option",{attrs:{label:n.translate(t),value:t.name}})}));return e("el-select",{attrs:{value:"",placeholder:this.translate("made-in")},on:{input:this.changeAllMachine}},[i])},changeAllMachine:function(e){var t=this,n=this.machines.find(function(t){return t.name===e}),i=void 0;i=function(s){t.categories[s.recipe.category].includes(e)&&(s.machine=n),s.sub.forEach(function(e){i(e)})},this.requirements.forEach(i),this.remainders.forEach(i)},expends:function(e){var t=this,n=[];return e.sub.forEach(function(e){n.push(e),e.expended&&n.push.apply(n,y()(t.expends(e)))}),n},saveHash:function(){var e=[],t=void 0;this.shownData.forEach(function(n){switch(n.type){case"requirement":t="T";break;case"remainder":t="R";break;case"sub":t="S";break;default:return}if(!(Math.abs(n.needs)<1e-4)){t+="/"+n.name+"/"+("requirement"===n.type?n.needs:0)+"/"+n.machine.name+"/";var i=[];n.modules.forEach(function(e){e&&i.push(e.name)}),t+=i.join("~")+"/";var s=[];n.beacons.forEach(function(e){var t=[];e.modules.forEach(function(e){e&&t.push(e.name)}),s.push(e.beacon.name+"="+e.count+"="+t.join("~"))}),t+=s.join(":")+"/"+(n.expended?"T":"F")+"/"+n.indent,e.push(t)}}),window.history.pushState(null,null,"/#"+e.join("&"))},loadHash:function(){var e=this;if(window.location.hash){this.hashLoaded=!1,this.remainders=[],this.requirements=[];var t={T:"requirement",R:"remainder",S:"sub"},n=[],i=[],s=[];window.location.hash.substring(1).split("&").forEach(function(o,a){var r=o.split("/");if(!(r.length<8)){var u=Number(r[7]),c=new Q.Row(r[1],t[r[0]]);if(0===u)s=[c],"T"===r[0]?n.push(c):"R"===r[0]&&i.push(c);else if(c.indent=u,u>s.length-1)s[s.length-1]._sub.push(c),s.push(c);else{for(;u!==s.length&&0!==s.length;)s.pop();s[s.length-1].sub.push(c)}c.needs=Number(r[2]),c.machine=e.machines.find(function(e){return e.name===r[3]}),r[4].split("~").forEach(function(t){c.modules.push(e.modules.find(function(e){return e&&e.name===t}))}),r[5].split(":").forEach(function(t){if(t){var n=t.split("="),i=c.beacons.find(function(e){return e.beacon.name===n[0]});i.count=Number(n[1]),n[2].split("~").forEach(function(t){i.modules.push(e.modules.find(function(e){return e&&e.name===t}))})}}),c.expended="T"===r[6],c._sub=[]}}),i.forEach(function(e){return e.update()}),n.forEach(function(e){return e.update()}),this.remainders=i,this.requirements=n,setTimeout(function(){e.hashLoaded=!0},100)}else this.hashLoaded=!0},translate:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.a.translate.apply(f.a,[this].concat(y()(t)))},format:function(e){for(var t=0;e>1e3&&t<3;)e/=1e3,t++;return e=e.toFixed(2)+" ",t&&(e+=["k","M","G","T"][t]),e},icon:f.a.icon},created:function(){this.loadHash()},mounted:function(){this.loadedLanguages[this.$i18n.locale]=!0,this.locale=this.$i18n.locale,this.$nextTick(this.$forceUpdate)},computed:{groups:function(){return this.$store.state.meta.groups},subgroups:function(){return this.$store.state.meta.subgroups},recipes:function(){return this.$store.state.meta.recipes},items:function(){return this.$store.state.meta.items},machines:function(){return this.$store.state.meta.machines},categories:function(){return this.$store.state.meta.categories},inserters:function(){return this.$store.state.meta.inserters},modules:function(){return this.$store.state.meta.modules},languages:function(){return this.$store.state.meta.languages},metaVersion:function(){return this.$store.state.metaVersion},difficulty:function(){return this.$store.state.difficulty},tableData:function(){return this.shownData.concat(this.summaryData)},shownData:function(){var e=this.expends({sub:this.requirements});e.push({type:"split"});var t=this.expends({sub:this.remainders}),n=[];return e.forEach(function(e,t){Math.abs(e.needs)<1e-4&&n.push(t)}),n.sort(function(e,t){return t-e}).forEach(function(t){e.splice(t,1)}),n=[],t.forEach(function(e,t){e.saveRecipeConfig(),Math.abs(e.needs)<1e-4&&n.push(t)}),n.sort(function(e,t){return t-e}).forEach(function(e){t.splice(e,1)}),e.concat(t)},summaryData:function(){var e={},t=0,n=[];return this.shownData.forEach(function(e){if(e.isData){var i=n.find(function(t){return t.name===e.machine.name});i||(i={name:e.machine.name,count:0},n.push(i)),i.count+=parseInt(Math.ceil(e.machineCount())),"electric"===e.machine.energy_source.type&&(t+=e.machine.energy_usage*(1+e.bonus.consumption)*e.machineCount())}}),e.type="sums",e.consumption=this.format(t)+"W ("+this.translate("beacons-not-included")+")",e.machines=n,[e]},remainderTrigger:function(){return[this.requirements,this.remainders]}},watch:{metaVersion:function(){this.loadHash()},locale:function(){var e=this,t=this.locale;this.loadedLanguages[t]?this.$i18n.locale=t:w.loadTranslation(this,t).then(function(){e.$i18n.locale=t,e.loadedLanguages[t]=!0})},requirements:{handler:M()(function(){this.requirements.forEach(function(e){return e.update()})},50,{trailing:!1}),deep:!0},remainderTrigger:{handler:M()(function(){var e=void 0,t=this.remainders;t.forEach(function(e){e.sources=[]}),e=function(n){n.sub.forEach(function(i){if(n.expended)e(i);else{var s=t.find(function(e){return e.name===i.name});s||(s=new Q.Row(i.name,"remainder"),t.push(s)),s.sources.find(function(e){return e.id===i.id})||s.sources.push(i)}})},this.requirements.forEach(e),t.forEach(function(e){e.needs=e.sources.reduce(function(e,t){return e+t.needs},0),e.update()}),t.forEach(e),t.forEach(function(e){e.needs=e.sources.reduce(function(e,t){return e+t.needs},0),e.update()}),this.hashLoaded&&this.saveHash()},50,{trailing:!1}),deep:!0}}},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid",attrs:{id:"container",type:"flex"}},[n("vue-headful",{attrs:{title:e.translate("factorio-quantizative-tool")}}),e._v(" "),n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("h1",[n("span",{attrs:{"data-type":"quantorio"}},[e._v(e._s(e.translate("factorio-quantizative-tool")))])])]),e._v(" "),n("el-col",{style:{"text-align":"end"},attrs:{span:8}},[n("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleMod}},[e._v(e._s(e.$t("mods")))]),e._v(" "),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.window.location.href="https://github.com/garveen/quantorio"}}},[e._v("View on GitHub")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":""},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},e._l(e.languages,function(e,t){return n("el-option",{key:t,attrs:{label:e,value:t}})}))],1)],1),e._v(" "),n("el-table",{attrs:{data:e.tableData,"row-class-name":e.tableRowClassName}},[n("el-table-column",{attrs:{width:"64","render-header":e.renderHeaderOperation},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isData?[n("div",{style:{display:"flex","flex-direction":"column"}},["requirement"===t.row.type?n("el-button",{staticClass:"operation el-icon-minus el-icon",attrs:{type:"danger",size:"small"},on:{click:function(n){e.handleRemove(t.$index,t.row)}}}):e._e(),e._v(" "),t.row.expended?n("el-button",{staticClass:"operation el-icon-arrow-left el-icon",attrs:{type:"warning",size:"small"},on:{click:function(e){t.row.expended=!1}}}):t.row.canExpend?n("el-button",{staticClass:"operation el-icon-arrow-right el-icon",attrs:{type:"primary",size:"small"},on:{click:function(e){t.row.expended=!0}}}):e._e()],1)]:e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.translate("name")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isData?[n("el-row",[n("el-col",{attrs:{offset:t.row.indent}},[n("div",{style:{display:"flex"}},[n("img",{staticClass:"icon",attrs:{src:t.row.icon}}),e._v(" "),n("span",{style:{margin:"auto 0 auto 10px"}},[e._v(e._s(e.translate("dummy"!==t.row.recipe.name?t.row.recipe:t.row)))])])])],1)]:e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"needs",label:e.translate("requirement-per-minute")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isData?["requirement"===t.row.type?n("el-input-number",{attrs:{min:0,"controls-position":"right",size:"small"},model:{value:t.row.needs,callback:function(n){e.$set(t.row,"needs",n)},expression:"scope.row.needs"}}):n("span",[e._v(e._s(Math.round(100*t.row.needs)/100))])]:e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"made_in","render-header":e.renderHeaderMachine},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isData?n("el-popover",{attrs:{placement:"bottom",trigger:"click","popper-class":"machine-popper"}},[n("div",{staticClass:"flex button",attrs:{slot:"reference"},slot:"reference"},[n("img",{staticClass:"button icon",attrs:{src:e.icon(t.row.machine)}}),e._v(" "),e._l(t.row.modules,function(t){return t?n("img",{staticClass:"icon",attrs:{src:e.icon(t)}}):e._e()}),e._v(" "),n("span",{style:{"margin-right":"8px"}},[e._v(e._s(e.translate(t.row.machine)))]),e._v(" "),e._l(t.row.beacons,function(t){return 0!==t.count?n("span",{staticClass:"flex"},[n("span",[e._v(", "+e._s(t.count)+" X")]),e._v(" "),n("img",{staticClass:"icon",attrs:{src:e.icon(t.beacon)}}),e._v(" "),e._l(t.modules,function(t){return t?n("img",{staticClass:"icon",attrs:{src:e.icon(t)}}):e._e()})],2):e._e()})],2),e._v(" "),n("div",[n("span",{staticClass:"flex"},[n("el-popover",{ref:"machinePopover",attrs:{placement:"bottom",trigger:"hover"}},[n("div",[e._l(e.machines,function(i){return e.categories[t.row.recipe.category].includes(i.name)&&(!i.ingredient_count||i.ingredient_count>=t.row.recipe[e.difficulty].ingredient_count)?[n("img",{staticClass:"button icon icon-bordered",attrs:{src:e.icon(e.items[i.name])},on:{click:function(n){e.selectMachine(t.row,i)}}})]:e._e()})],2),e._v(" "),n("span",{attrs:{slot:"reference"},slot:"reference"},[n("img",{staticClass:"icon button",attrs:{src:e.icon(t.row.machine)}})])]),e._v(" "),e._l(t.row.machine.module_slots,function(i){return n("ModuleSelector",{key:i,ref:"modulePopover",refInFor:!0,attrs:{allows:t.row.machine.allowed_effects,module:t.row.modules[i-1]},on:{"update:module":function(n){e.$set(t.row.modules,i-1,n)}}})})],2)]),e._v(" "),n("div",e._l(t.row.beacons,function(t){return n("span",{staticClass:"flex"},[n("img",{staticClass:"icon",attrs:{src:e.icon(t.beacon)}}),e._v(" "),e._l(t.beacon.module_slots,function(i){return n("ModuleSelector",{key:i,ref:"modulePopover",refInFor:!0,attrs:{allows:t.beacon.allowed_effects,module:t.modules[i-1]},on:{"update:module":function(n){e.$set(t.modules,i-1,n)}}})}),e._v(" "),n("el-input-number",{attrs:{min:0,"controls-position":"right",size:"small"},model:{value:t.count,callback:function(n){e.$set(t,"count",n)},expression:"beaconConfig.count"}})],2)}))]):e._e(),e._v(" "),"sums"===t.row.type?n("span",[e._v("\n          "+e._s(t.row.consumption)+"\n        ")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"",label:e.translate("machine-number")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isData?[e._v("\n          "+e._s(t.row.machineCount().toFixed(2))+"\n        ")]:e._e(),e._v(" "),"sums"===t.row.type?e._l(t.row.machines,function(t){return n("span",{style:{margin:"0 5px"}},[n("img",{attrs:{src:e.icon(t)}}),e._v(e._s(t.count)+"\n          ")])}):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"","render-header":e.renderHeaderInserter},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isData?[n("span",{staticClass:"flex around"},e._l(e.inserters,function(i){return n("span",[e._v("\n              "+e._s(e.format(t.row.inserterCount(i)))+"\n            ")])}))]:e._e()]}}])})],1),e._v(" "),e.loadedLanguages[e.locale]?n("RequirementSelector",{key:e.locale+e.metaVersion,attrs:{visible:e.selectTargetDialogVisiable},on:{"update:visible":function(t){e.selectTargetDialogVisiable=t},select:e.doAdd}}):e._e(),e._v(" "),n("Mods",{attrs:{visible:e.ModsDialogVisiable},on:{"update:visible":function(t){e.ModsDialogVisiable=t}}})],1)},staticRenderFns:[]};var J={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"lmask"})},staticRenderFns:[]};var ee={components:{Index:n("VU/8")(K,Y,!1,function(e){n("jBPH"),n("XUQF")},"data-v-7324513a",null).exports,Loading:n("VU/8")(null,J,!1,function(e){n("t5Ny")},"data-v-bf9023c6",null).exports},name:"app",data:function(){return{inited:!1}},beforeCreate:function(){var e=this;n.e(2).then(n.bind(null,"mcDd")).then(function(t){t.default(o.default,e.$i18n)})},mounted:function(){var e=this;w.init("zh-CN").then(function(t){w.setVue(e,t);var n=void 0,i=navigator.language||navigator.userLanguage;n=t.languages[i]?i:"zh-CN",e.$i18n.locale=n,e.inited=!0,e.$store.commit("setLoading",!1)})},computed:{loading:function(){return this.$store.state.loading}}},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.inited?t("index"):this._e(),this._v(" "),this.loading?t("Loading"):this._e()],1)},staticRenderFns:[]};var ne=n("VU/8")(ee,te,!1,function(e){n("z8Ud")},null,null).exports,ie=n("NYxO"),se=n("TXmL"),oe=n("WiKS"),ae=n.n(oe),re=n("XGBo"),ue=n.n(re);o.default.config.productionTip=!1,o.default.use(ie.a),o.default.use(se.a),o.default.use(ue.a),o.default.component("vue-headful",ae.a);var ce=new se.a({locale:"en",fallbackLocale:"en",messages:{}}),le=new ie.a.Store({state:{difficulty:"normal",meta:{},metaVersion:0,loading:!0},mutations:{setDifficulty:function(e,t){e.difficulty=t},setMeta:function(e,t){e.meta=t,e.metaVersion=e.metaVersion+1},saveTranslation:function(e,t){var n=s()(t,2),i=n[0],o=n[1];e.meta.translations[i]=o},setLoading:function(e,t){e.loading=t}}});new o.default({el:"#app",store:le,i18n:ce,render:function(e){return e(ne)}})},Ph1M:function(e,t,n){"use strict";(function(e){var i=n("fZjL"),s=n.n(i),o=n("fPsR");t.a={props:["module","allows"],data:function(){return{allowedModules:[],selectedModule:e,visiable:!1}},methods:{icon:o.a.icon,update:function(e){this.selectedModule=e,this.visiable=!1,this.$emit("update:module",e)}},mounted:function(){var e=this;this.allowedModules.length?this.modules.forEach(function(t){var n=!0;t&&s()(t.effect).forEach(function(t){e.allows.includes(t)||(n=!1)}),n&&e.allowedModules.push(t)}):this.allowedModules=this.modules},computed:{modules:function(){return this.$store.state.meta.modules}}}}).call(t,n("f1Eh")(e))},STAw:function(e,t,n){0},XUQF:function(e,t){},fPsR:function(e,t,n){"use strict";t.a={icon:function(e,t){var n=void 0;if("string"==typeof e&&window.meta.items[e]?n=window.meta.items[e].icon:e&&e.icon?n=e.icon:e&&(e.name&&window.meta.items[e.name]&&(n=window.meta.items[e.name].icon),!n&&e.showName&&window.meta.items[e.showName]&&(n=window.meta.items[e.showName].icon)),n&&window.files[n])return n.replace(/.*\./,""),"data:image/"+n.replace(/.*\./,"")+";base64,"+window.files[n];switch(t){case"module":return"data:image/png;base64,"+window.files["slot-icon-module.png"]}console.log(e,n,t)},sortByOrder:function(e,t){if(!e)return-1;if(!t)return 1;var n,i,s=e.showName||e.name,o=t.showName||t.name;n=window.meta.items[s].order.split("-"),i=window.meta.items[o].order.split("-");for(var a=0;a<Math.max(n.length,i.length);a++){if(void 0===n[a])return-1;if(void 0===i[a])return 1;if(n[a]!==i[a])return n[a]>i[a]?1:-1}return(s=parseInt(s.replace(/^.*-/,"")))>(o=parseInt(o.replace(/^.*-/,"")))?1:s<o?-1:0},translate:function(e,t,n){var i=e.$i18n;i||console.trace();var s=n?i.fallbackLocale:i.locale;if(!t)return!1;if("string"==typeof t)return i.te(t,s)?i.t(t,s):n?t:this.translate(e,t,!0);var o=t.showName||t.name;return i.te(o,s)?i.t(o,s):n?o:this.translate(e,t,!0)}}},jBPH:function(e,t){},pbL6:function(e,t,n){var i={"./af-ZA":"N57/","./af-ZA.js":"N57/","./ar":"HjM1","./ar.js":"HjM1","./bg":"FLZX","./bg.js":"FLZX","./ca":"RTTe","./ca.js":"RTTe","./cz":"EBKU","./cz.js":"EBKU","./da":"/IUv","./da.js":"/IUv","./de":"18iE","./de.js":"18iE","./ee":"Ug3A","./ee.js":"Ug3A","./el":"6YPE","./el.js":"6YPE","./en":"wUZ8","./en.js":"wUZ8","./es":"JR9b","./es.js":"JR9b","./fa":"O83D","./fa.js":"O83D","./fi":"xWes","./fi.js":"xWes","./fr":"SjQo","./fr.js":"SjQo","./he":"o9y8","./he.js":"o9y8","./hu":"kAux","./hu.js":"kAux","./id":"QCu+","./id.js":"QCu+","./it":"zGag","./it.js":"zGag","./ja":"znjY","./ja.js":"znjY","./ko":"umXq","./ko.js":"umXq","./kz":"s69x","./kz.js":"s69x","./lt":"iomK","./lt.js":"iomK","./lv":"oeUK","./lv.js":"oeUK","./mn":"U2g/","./mn.js":"U2g/","./nb-NO":"et6G","./nb-NO.js":"et6G","./nl":"Ti3X","./nl.js":"Ti3X","./pl":"7X8f","./pl.js":"7X8f","./pt":"KPSE","./pt-br":"LVWl","./pt-br.js":"LVWl","./pt.js":"KPSE","./ru-RU":"UMRm","./ru-RU.js":"UMRm","./sk":"6Olb","./sk.js":"6Olb","./sl":"QxZd","./sl.js":"QxZd","./sv-SE":"Js62","./sv-SE.js":"Js62","./ta":"499j","./ta.js":"499j","./th":"QG7+","./th.js":"QG7+","./tk":"pU2x","./tk.js":"pU2x","./tr-TR":"uc8M","./tr-TR.js":"uc8M","./ua":"Xwqu","./ua.js":"Xwqu","./vi":"MpSA","./vi.js":"MpSA","./zh-CN":"Vi3T","./zh-CN.js":"Vi3T","./zh-TW":"gwsl","./zh-TW.js":"gwsl"};function s(e){return n(o(e))}function o(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(i)},s.resolve=o,e.exports=s,s.id="pbL6"},t5Ny:function(e,t){},z8Ud:function(e,t){}},["NHnr"]);